<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment - LOGIKS BET</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <header>
      <div class="header-container">
        <div class="logo">
          <i class="fas fa-chart-line logo-icon"></i>
          LOGIKS BET
        </div>
        <nav>
          <ul class="nav-menu">
            <li><a href="index.html" class="nav-link">Home</a></li>
            <li><a href="livescore.html" class="nav-link">LiveScore</a></li>
            <li><a href="expert-tips.html" class="nav-link">Expert Tips</a></li>
            <li><a href="vip.html" class="nav-link vip-btn">VIP</a></li>
            <li><a href="contact.html" class="nav-link">Contact</a></li>
          </ul>
          <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
        </nav>
      </div>
    </header>

    <main class="payment-page">
      <div class="container">
        <h1 class="section-title">VIP Membership Payment</h1>
        <p>
          Choose your preferred payment method to unlock exclusive VIP
          predictions.
        </p>
        <div class="payment-methods">
          <!-- Card/Stripe -->
          <div class="payment-option">
            <i class="fab fa-cc-stripe" style="color: #635bff"></i>
            <h3>Credit/Debit Card</h3>
            <p>Pay securely using any major card powered by Stripe.</p>
            <button class="btn btn-primary" id="stripePayBtn">
              Pay with Card
            </button>
          </div>
          <!-- PayPal -->
          <div class="payment-option">
            <i class="fab fa-paypal" style="color: #003087"></i>
            <h3>PayPal</h3>
            <p>Pay via your PayPal account.</p>
            <button class="btn btn-primary" id="paypalPayBtn">
              Pay with PayPal
            </button>
          </div>
          <!-- Apple Pay -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/ios-filled/50/000000/apple-pay.png"
              alt="Apple Pay"
            />
            <h3>Apple Pay</h3>
            <p>Easy payment with Apple Pay.</p>
            <button class="btn btn-primary" id="applePayBtn">
              Pay with Apple Pay
            </button>
          </div>
          <!-- Google Pay -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/color/48/000000/google-pay-india.png"
              alt="Google Pay"
            />
            <h3>Google Pay</h3>
            <p>Pay with Google Pay on your device.</p>
            <button class="btn btn-primary" id="googlePayBtn">
              Pay with Google Pay
            </button>
          </div>
          <!-- Mobile Money -->
          <div class="payment-option">
            <i class="fas fa-mobile-alt" style="color: #009688"></i>
            <h3>Mobile Money</h3>
            <p>Pay with MTN, Airtel, M-Pesa, etc.</p>
            <button class="btn btn-primary" id="mobileMoneyBtn">
              Pay with Mobile Money
            </button>
          </div>
          <!-- Bank Transfer -->
          <div class="payment-option">
            <i class="fas fa-university" style="color: #2d3436"></i>
            <h3>Bank Transfer</h3>
            <p>Transfer directly to our bank account.</p>
            <button class="btn btn-primary" id="bankTransferBtn">
              Bank Transfer Info
            </button>
          </div>
          <!-- Crypto -->
          <div class="payment-option">
            <i class="fab fa-bitcoin" style="color: orange"></i>
            <h3>Crypto Payment</h3>
            <p>Bitcoin, Ethereum, USDT, BNB, DOGE, and more.</p>
            <button class="btn btn-primary" id="cryptoPayBtn">
              Pay with Crypto
            </button>
          </div>
          <!-- Western Union -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/ios-filled/50/000000/western-union.png"
              alt="Western Union"
            />
            <h3>Western Union</h3>
            <p>Send via Western Union.</p>
            <button class="btn btn-primary" id="wuPayBtn">
              Western Union Info
            </button>
          </div>
          <!-- MoneyGram -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/color/48/000000/moneygram.png"
              alt="MoneyGram"
            />
            <h3>MoneyGram</h3>
            <p>Send via MoneyGram.</p>
            <button class="btn btn-primary" id="mgPayBtn">
              MoneyGram Info
            </button>
          </div>
          <!-- AliPay -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/color/48/000000/alipay.png"
              alt="AliPay"
            />
            <h3>AliPay</h3>
            <p>Pay with AliPay.</p>
            <button class="btn btn-primary" id="alipayBtn">
              Pay with AliPay
            </button>
          </div>
          <!-- WeChat Pay -->
          <div class="payment-option">
            <img
              src="https://img.icons8.com/color/48/000000/weixing.png"
              alt="WeChat Pay"
            />
            <h3>WeChat Pay</h3>
            <p>Pay with WeChat Pay.</p>
            <button class="btn btn-primary" id="wechatPayBtn">
              Pay with WeChat Pay
            </button>
          </div>
        </div>
        <!-- Success Message -->
        <div
          id="paymentSuccessMsg"
          class="hidden"
          style="margin-top: 30px; text-align: center"
        >
          <div style="font-size: 2rem; color: green">
            <i class="fas fa-check-circle"></i>
          </div>
          <h2>Payment Successful!</h2>
          <p>Redirecting you to VIP page...</p>
        </div>
      </div>
    </main>

    <!-- All Modals share .modal-bg for easy hiding -->
    <div id="cryptoModal" class="modal-bg hidden">
      <div class="modal">
        <h2>Send Crypto Payment</h2>
        <p>
          Choose your crypto and send the exact amount to the address below:
        </p>
        <div style="margin-bottom: 10px">
          <strong>Bitcoin (BTC):</strong>
          <div class="crypto-address">
            bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh
          </div>
          <img
            src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh"
            class="qr-code"
            alt="BTC QR"
          />
        </div>
        <div style="margin-bottom: 10px">
          <strong>Ethereum (ETH):</strong>
          <div class="crypto-address">
            0x1234567890abcdef1234567890abcdef12345678
          </div>
          <img
            src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=0x1234567890abcdef1234567890abcdef12345678"
            class="qr-code"
            alt="ETH QR"
          />
        </div>
        <div style="margin-bottom: 10px">
          <strong>USDT (TRC20):</strong>
          <div class="crypto-address">TSJ7Jf9G2v7Gf4g7z3XoK8wQ7s3qJcYwVq</div>
          <img
            src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=TSJ7Jf9G2v7Gf4g7z3XoK8wQ7s3qJcYwVq"
            class="qr-code"
            alt="USDT QR"
          />
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmCryptoBtn">
            I've Paid
          </button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
        <p style="font-size: 13px; color: #888; margin-top: 14px">
          * Payment is simulated for demo purposes.
        </p>
      </div>
    </div>

    <div id="mobileModal" class="modal-bg hidden">
      <div class="modal">
        <h2>Mobile Money Payment</h2>
        <p>Send your payment to the Mobile Money number below:</p>
        <div class="crypto-address">MTN: +2347012345678</div>
        <div class="crypto-address">Airtel: +2348012345678</div>
        <div class="crypto-address">M-Pesa: +254701234567</div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmMobileBtn">
            I've Paid
          </button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <div id="bankModal" class="modal-bg hidden">
      <div class="modal">
        <h2>Bank Transfer Details</h2>
        <p>Transfer to the following account:</p>
        <div class="crypto-address">
          Bank: Zenith Bank<br />Acc Name: SportPredictPro<br />Acc Number:
          1234567890<br />SWIFT: ZEIBNGLA
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmBankBtn">I've Paid</button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <div id="wuModal" class="modal-bg hidden">
      <div class="modal">
        <h2>Western Union Info</h2>
        <p>Receiver Name: John Doe<br />Country: Nigeria</p>
        <div class="crypto-address">
          After payment, send MTCN code to support@sportpredictpro.com
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmWUBtn">I've Paid</button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <div id="mgModal" class="modal-bg hidden">
      <div class="modal">
        <h2>MoneyGram Info</h2>
        <p>Receiver Name: John Doe<br />Country: Nigeria</p>
        <div class="crypto-address">
          After payment, send Ref Code to support@sportpredictpro.com
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmMGBtn">I've Paid</button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <div id="alipayModal" class="modal-bg hidden">
      <div class="modal">
        <h2>AliPay Payment</h2>
        <img
          src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=alipay1234567890"
          class="qr-code"
          alt="AliPay QR"
        />
        <div class="crypto-address">AliPay ID: 1234567890</div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmAliPayBtn">
            I've Paid
          </button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <div id="wechatModal" class="modal-bg hidden">
      <div class="modal">
        <h2>WeChat Pay Payment</h2>
        <img
          src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=wechatpay1234567890"
          class="qr-code"
          alt="WeChat QR"
        />
        <div class="crypto-address">WeChat Pay ID: 1234567890</div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="confirmWeChatBtn">
            I've Paid
          </button>
          <button class="btn btn-secondary close-modal-btn">Close</button>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <!-- ... your existing footer ... -->
      </div>
    </footer>
    <script>
      // Helper: simulate payment success
      async function onPaymentSuccess() {
        // Get JWT from localStorage (or cookie)
        const token = localStorage.getItem("jwt");
        if (!token) {
          showToast("You must be logged in to activate VIP.", true);
          window.location.href = "logins.html";
          return;
        }
        try {
          // Call backend to activate VIP
          const res = await fetch(
            "https://your-backend-domain.com/api/v1/payment/activate-vip",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Authorization: "Bearer " + token,
              },
            }
          );
          const data = await res.json();
          if (res.ok) {
            localStorage.setItem("vipStatus", "active");
            document.querySelector(".payment-methods").classList.add("hidden");
            document
              .getElementById("paymentSuccessMsg")
              .classList.remove("hidden");
            setTimeout(() => (window.location.href = "vip.html"), 1800);
          } else {
            showToast(data.message || "VIP activation failed.", true);
          }
        } catch (err) {
          showToast("VIP activation failed. Please try again.", true);
        }
      }

      // Helper: POST to backend and handle payment response
      async function handlePayment(endpoint, options = {}) {
        try {
          const res = await fetch(
            "https://your-backend-domain.com/api/v1/payment/" + endpoint,
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: options.body ? JSON.stringify(options.body) : undefined,
              credentials: "include",
            }
          );
          const data = await res.json();
          if (data.url) {
            window.location.href = data.url;
          } else if (data.instructions) {
            showInstructionsModal(endpoint, data.instructions);
          } else {
            showToast("Payment response received.");
          }
        } catch (err) {
          showToast("Payment failed. Please try again.", true);
        }
      }

      // Toast notification
      function showToast(message, isError = false) {
        let toast = document.getElementById("toast-notification");
        if (!toast) {
          toast = document.createElement("div");
          toast.id = "toast-notification";
          toast.style.position = "fixed";
          toast.style.bottom = "30px";
          toast.style.left = "50%";
          toast.style.transform = "translateX(-50%)";
          toast.style.background = isError ? "#e74c3c" : "#27ae60";
          toast.style.color = "#fff";
          toast.style.padding = "14px 32px";
          toast.style.borderRadius = "8px";
          toast.style.fontSize = "1.1rem";
          toast.style.boxShadow = "0 2px 8px rgba(0,0,0,0.15)";
          toast.style.zIndex = 99999;
          document.body.appendChild(toast);
        }
        toast.textContent = message;
        toast.style.display = "block";
        setTimeout(() => {
          toast.style.display = "none";
        }, 3000);
      }

      // Modal for payment instructions
      function showInstructionsModal(endpoint, instructions) {
        let modal = document.getElementById("instructionsModal");
        if (!modal) {
          modal = document.createElement("div");
          modal.id = "instructionsModal";
          modal.className = "modal-bg";
          modal.innerHTML = `
            <div class="modal">
              <h2>Payment Instructions</h2>
              <div id="instructionsContent" style="margin:18px 0 10px 0;text-align:left;"></div>
              <div class="modal-footer">
                <button class="btn btn-primary" id="closeInstructionsBtn">Close</button>
              </div>
            </div>
          `;
          document.body.appendChild(modal);
        }
        const content = document.getElementById("instructionsContent");
        if (typeof instructions === "string") {
          content.innerHTML = `<div style='white-space:pre-line;'>${instructions}</div>`;
        } else if (typeof instructions === "object") {
          let html = "";
          for (const [key, value] of Object.entries(instructions)) {
            html += `<div style='margin-bottom:8px;'><strong>${key}:</strong> <span class='crypto-address'>${value}</span></div>`;
          }
          content.innerHTML = html;
        }
        modal.classList.remove("hidden");
        document.getElementById("closeInstructionsBtn").onclick = function () {
          modal.classList.add("hidden");
        };
      }

      // Show only the modal you want, hide all others first
      function showModal(id) {
        document
          .querySelectorAll(".modal-bg")
          .forEach((m) => m.classList.add("hidden"));
        document.getElementById(id).classList.remove("hidden");
      }

      // Hide all modals
      function hideAllModals() {
        document
          .querySelectorAll(".modal-bg")
          .forEach((m) => m.classList.add("hidden"));
      }

      // Payment method triggers
      document.getElementById("stripePayBtn").onclick = function () {
        this.disabled = true;
        this.textContent = "Processing...";
        handlePayment("create-checkout-session");
      };
      document.getElementById("paypalPayBtn").onclick = function () {
        this.disabled = true;
        this.textContent = "Redirecting to PayPal...";
        handlePayment("paypal");
      };
      document.getElementById("applePayBtn").onclick = function () {
        this.disabled = true;
        this.textContent = "Processing...";
        handlePayment("applepay");
      };
      document.getElementById("googlePayBtn").onclick = function () {
        this.disabled = true;
        this.textContent = "Processing...";
        handlePayment("googlepay");
      };
      document.getElementById("mobileMoneyBtn").onclick = function () {
        handlePayment("mobilemoney");
      };
      document.getElementById("bankTransferBtn").onclick = function () {
        handlePayment("banktransfer");
      };
      document.getElementById("cryptoPayBtn").onclick = function () {
        handlePayment("crypto");
      };
      document.getElementById("wuPayBtn").onclick = function () {
        handlePayment("westernunion");
      };
      document.getElementById("mgPayBtn").onclick = function () {
        handlePayment("moneygram");
      };
      document.getElementById("alipayBtn").onclick = function () {
        handlePayment("alipay");
      };
      document.getElementById("wechatPayBtn").onclick = function () {
        handlePayment("wechatpay");
      };

      // All close buttons (use .close-modal-btn class!)
      document.querySelectorAll(".close-modal-btn").forEach((btn) => {
        btn.onclick = hideAllModals;
      });

      // All confirm "I've Paid" buttons for modals that require confirmation
      document.getElementById("confirmCryptoBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmMobileBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmBankBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmWUBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmMGBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmAliPayBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };
      document.getElementById("confirmWeChatBtn").onclick = function () {
        hideAllModals();
        onPaymentSuccess();
      };

      // Prevent modals from auto-opening or payment auto-processing
      // Only user actions can show a modal or trigger payment
    </script>
    <script src="script.js"></script>
  </body>
</html>
